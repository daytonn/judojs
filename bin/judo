#!/usr/bin/env ruby -w

root = File.expand_path(File.join(File.dirname(__FILE__), "../lib"))

begin
  require "simpleconsole"
  require "fssm"
  require "#{root}/judo.rb"
rescue LoadError
  require "rubygems"
  require "simpleconsole"
  require "fssm"
  require "#{root}/judo.rb"
end

class Controller < SimpleConsole::Controller
  params :string => {:n => :name,
                     :d => :directory},
         :bool => {:h => :help}
         
  def default
    Judo::Command.help
  end
  
  def help
    Judo::Command.help
  end
  
  def create
    name = params[:name]
    directory = params[:directory] || '/'
    raise 'name is undefined: judo create -n "MyAppName"' if name.nil?
    Judo::Command.create(name, directory)
  end
  
  def compile
    Judo::Command.compile
  end
  
  def watch
    Judo::Command.watch
  end
  
  def import
    Judo::Command.import
  end
end

class View < SimpleConsole::View
end

SimpleConsole::Application.run(ARGV, Controller, View)